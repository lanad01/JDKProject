<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="rep">
<select id="getMaxRepno" resultType="Integer">
	select max(repno) from reply_info
</select>
<select id="getMaxRepGroupNo" resultType="Integer" parameterType="Integer">
	select max(repgroupno) from reply_info where repno=#{repno} <!--  같은 repno를 가진 댓글 레코드의 repgroupno 최대치를 얻어온다  -->
</select>
<insert id="putRep" parameterType="model.Reply">
	insert into reply_info values(#{repno},#{repgroupno},#{seqno},#{user_no},#{register_date},#{content})
</insert>
<select id="getRepList"  resultType="model.Reply" parameterType="Integer">
	select * from reply_info where seqno=#{seqno} and repgroupno=0<!--  입력된 seqno와 일치하는 seqno를 가진 bbs_info가 가진 모드 reply를 뽑아낸다  -->
</select>
<select id="getRereList" resultType="model.Reply" parameterType="Integer">
	select * from reply_info where repno=#{repno} and repgroupno>0 <!-- 같은 부모댓글 번호를 가지며 repgroupno가 0 이상인 모든 리플들을 리스트업한다 -->
</select>
<select id="getReplier" resultType="String" parameterType="Integer">
	select name from user_info where user_no=#{user_no}
</select>
</mapper>


